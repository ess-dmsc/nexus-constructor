


<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2.1.2. Python Examples using h5py &#8212; nexus v2020.10 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b849a4e9" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxdoc.css?v=0a676766" />
    <link rel="stylesheet" href="../../_static/blockquote.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=a16566f4"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="h5py example writing the simplest NeXus data file" href="writer_1_3.html" />
    <link rel="prev" title="2.1.1. Example NeXus C programs using native HDF5 commands" href="../code_native.html" /> 
    <link rel="stylesheet" href="../../_static/blockquote.css" type="text/css" />

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="writer_1_3.html" title="h5py example writing the simplest NeXus data file"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../code_native.html" title="2.1.1. Example NeXus C programs using native HDF5 commands"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">nexus v2020.10 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U"><span class="section-number">2. </span>Examples of writing and reading NeXus data files</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.1.2. </span>Python Examples using <code class="docutils literal notranslate"><span class="pre">h5py</span></code></a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="python-examples-using-h5py">
<span id="example-h5py"></span><span id="index-0"></span><h1><span class="section-number">2.1.2. </span>Python Examples using <code class="docutils literal notranslate"><span class="pre">h5py</span></code><a class="headerlink" href="#python-examples-using-h5py" title="Permalink to this heading">¶</a></h1>
<p>One way to gain a quick familiarity with NeXus is to start working with some data. For at least the
first few examples in this section, we have a simple two-column set of 1-D data, collected as part of a
series of alignment scans by the APS USAXS instrument during the time it was stationed at
beam line 32ID. We will show how to write this
data using the Python language and the <code class="docutils literal notranslate"><span class="pre">h5py</span></code> package <a class="footnote-reference brackets" href="#id3" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>
(<span class="target" id="index-1"></span>using  <code class="docutils literal notranslate"><span class="pre">h5py</span></code> calls directly rather than using the NeXus NAPI). The
actual data to be written was extracted (elsewhere) from a <code class="docutils literal notranslate"><span class="pre">spec</span></code> <a class="footnote-reference brackets" href="#id4" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> data file
and read as a text block from a file by the Python source code.
Our examples will start with the simplest case and add only mild complexity with each new case
since these examples are meant for those who are unfamiliar with NeXus.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><em>h5py</em>: <a class="reference external" href="https://www.h5py.org/">https://www.h5py.org/</a></p>
</aside>
<aside class="footnote brackets" id="id4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p><em>SPEC</em>: <a class="reference external" href="http://certif.com/spec.html">http://certif.com/spec.html</a></p>
</aside>
</aside>
<p>The data shown plotted in the next figure will be written to the NeXus HDF5 file
using only two NeXus base classes, <code class="docutils literal notranslate"><span class="pre">NXentry</span></code> and <code class="docutils literal notranslate"><span class="pre">NXdata</span></code>, in the first example
and then minor variations on this structure in the next two examples.  The
data model is identical to the one in the <a class="reference internal" href="../../introduction.html#fig-simple-example"><span class="std std-ref">Introduction</span></a>
chapter except that the names will be different, as shown below:</p>
<div class="compound">
<figure class="align-default" id="id9">
<a class="reference internal image-reference" href="../../_images/Simple.png"><img alt="simple data structure" src="../../_images/Simple.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-text">data structure, (from Introduction)</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p class="rubric">our h5py example</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>/entry:NXentry
<span class="linenos">2</span>    /mr_scan:NXdata
<span class="linenos">3</span>       /mr : float64[31]
<span class="linenos">4</span>       /I00 : int32[31]
</pre></div>
</div>
<figure class="align-default" id="id10">
<span id="example-h5py-plot"></span><a class="reference internal image-reference" href="../../_images/s00008.png"><img alt="Example-H5py-Plot" src="../../_images/s00008.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">plot of our <em>mr_scan</em></span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p class="rubric">two-column data for our <em>mr_scan</em></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>17.92608    1037
<span class="linenos"> 2</span>17.92591    1318
<span class="linenos"> 3</span>17.92575    1704
<span class="linenos"> 4</span>17.92558    2857
<span class="linenos"> 5</span>17.92541    4516
<span class="linenos"> 6</span>17.92525    9998
<span class="linenos"> 7</span>17.92508    23819
<span class="linenos"> 8</span>17.92491    31662
<span class="linenos"> 9</span>17.92475    40458
<span class="linenos">10</span>17.92458    49087
<span class="linenos">11</span>17.92441    56514
<span class="linenos">12</span>17.92425    63499
<span class="linenos">13</span>17.92408    66802
<span class="linenos">14</span>17.92391    66863
<span class="linenos">15</span>17.92375    66599
<span class="linenos">16</span>17.92358    66206
<span class="linenos">17</span>17.92341    65747
<span class="linenos">18</span>17.92325    65250
<span class="linenos">19</span>17.92308    64129
<span class="linenos">20</span>17.92291    63044
<span class="linenos">21</span>17.92275    60796
<span class="linenos">22</span>17.92258    56795
<span class="linenos">23</span>17.92241    51550
<span class="linenos">24</span>17.92225    43710
<span class="linenos">25</span>17.92208    29315
<span class="linenos">26</span>17.92191    19782
<span class="linenos">27</span>17.92175    12992
<span class="linenos">28</span>17.92158    6622
<span class="linenos">29</span>17.92141    4198
<span class="linenos">30</span>17.92125    2248
<span class="linenos">31</span>17.92108    1321
</pre></div>
</div>
</div>
<section id="writing-the-simplest-data-using-h5py">
<h2><span class="section-number">2.1.2.1. </span>Writing the simplest data using <code class="docutils literal notranslate"><span class="pre">h5py</span></code><a class="headerlink" href="#writing-the-simplest-data-using-h5py" title="Permalink to this heading">¶</a></h2>
<p>These two examples show how to write the simplest data (above).
One example writes the data directly to the <a class="reference internal" href="../../classes/base_classes/NXdata.html#nxdata"><span class="std std-ref">NXdata</span></a> group
while the other example writes the data to <code class="docutils literal notranslate"><span class="pre">NXinstrument/NXdetector/data</span></code>
and then creates a soft link to that data in <code class="docutils literal notranslate"><span class="pre">NXdata</span></code>.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="writer_1_3.html"><code class="docutils literal notranslate"><span class="pre">h5py</span></code> example writing the simplest NeXus data file</a></li>
<li class="toctree-l1"><a class="reference internal" href="writer_2_1.html"><code class="docutils literal notranslate"><span class="pre">h5py</span></code> example writing a simple NeXus data file with links</a></li>
</ul>
</div>
</section>
<section id="complete-h5py-example-writing-and-reading-a-nexus-data-file">
<span id="example-h5py-complete"></span><h2><span class="section-number">2.1.2.2. </span>Complete <code class="docutils literal notranslate"><span class="pre">h5py</span></code> example writing and reading a NeXus data file<a class="headerlink" href="#complete-h5py-example-writing-and-reading-a-nexus-data-file" title="Permalink to this heading">¶</a></h2>
<section id="writing-the-hdf5-file-using-h5py">
<span id="example-h5py-writing"></span><h3>Writing the HDF5 file using <strong>h5py</strong><a class="headerlink" href="#writing-the-hdf5-file-using-h5py" title="Permalink to this heading">¶</a></h3>
<p>In the main code section of <a class="reference internal" href="#example-h5py-basicwriter"><span class="std std-ref">BasicWriter.py</span></a>,
a current time stamp
is written in the format of <em>ISO 8601</em> (<code class="docutils literal notranslate"><span class="pre">yyyy-mm-ddTHH:MM:SS</span></code>).
For simplicity of this code example, we use a text string for the time, rather than
computing it directly from Python support library calls.  It is easier this way to
see the exact type of string formatting for the time.  When using the Python
<code class="docutils literal notranslate"><span class="pre">datetime</span></code> package, one way to write the time stamp is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">timestamp</span> <span class="o">=</span> <span class="s2">&quot;T&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="p">)</span>
</pre></div>
</div>
<p>The data (<code class="docutils literal notranslate"><span class="pre">mr</span></code> is similar to “two_theta” and
<code class="docutils literal notranslate"><span class="pre">I00</span></code> is similar to “counts”) is collated into two Python lists. We use the
<strong>numpy</strong> package to read the file and parse the two-column format.</p>
<p>The new HDF5 file is opened (and created if not already existing) for writing,
setting common NeXus attributes in the same command from our support library.
Proper HDF5+NeXus groups are created for <code class="docutils literal notranslate"><span class="pre">/entry:NXentry/mr_scan:NXdata</span></code>.
Since we are not using the NAPI, our
support library must create and set the <code class="docutils literal notranslate"><span class="pre">NX_class</span></code> attribute on each group.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We want to create the desired structure of
<code class="docutils literal notranslate"><span class="pre">/entry:NXentry/mr_scan:NXdata/</span></code>.</p>
<ol class="arabic simple">
<li><p>First, our support library calls
<code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">=</span> <span class="pre">h5py.File()</span></code>
to create the file and root level NeXus structure.</p></li>
<li><p>Then, it calls
<code class="docutils literal notranslate"><span class="pre">nxentry</span> <span class="pre">=</span> <span class="pre">f.create_group(&quot;entry&quot;)</span></code>
to create the <code class="docutils literal notranslate"><span class="pre">NXentry</span></code> group called
<code class="docutils literal notranslate"><span class="pre">entry</span></code> at the root level.</p></li>
<li><p>Then, it calls
<code class="docutils literal notranslate"><span class="pre">nxdata</span> <span class="pre">=</span> <span class="pre">nxentry.create_group(&quot;mr_scan&quot;)</span></code>
to create the <code class="docutils literal notranslate"><span class="pre">NXentry</span></code> group called
<code class="docutils literal notranslate"><span class="pre">entry</span></code> as a child of the <code class="docutils literal notranslate"><span class="pre">NXentry</span></code> group.</p></li>
</ol>
</div>
<p>Next, we create a dataset called <code class="docutils literal notranslate"><span class="pre">title</span></code> to hold a title string that can
appear on the default plot.</p>
<p>Next, we create datasets for <code class="docutils literal notranslate"><span class="pre">mr</span></code> and <code class="docutils literal notranslate"><span class="pre">I00</span></code> using our support library.
The data type of each, as represented in <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, will be recognized by
<code class="docutils literal notranslate"><span class="pre">h5py</span></code> and automatically converted to the proper HDF5 type in the file.
A Python dictionary of attributes is given, specifying the engineering units and other
values needed by NeXus to provide a default plot of this data.  By setting <code class="docutils literal notranslate"><span class="pre">signal=&quot;I00&quot;</span></code>
as an attribute on the group, NeXus recognizes <code class="docutils literal notranslate"><span class="pre">I00</span></code> as the default
<em>y</em> axis for the plot.  The <code class="docutils literal notranslate"><span class="pre">axes=&quot;mr&quot;</span></code> attribute on the <a class="reference internal" href="../../classes/base_classes/NXdata.html#nxdata"><span class="std std-ref">NXdata</span></a>
group connects the dataset to be used as the <em>x</em> axis.</p>
<p>Finally, we <em>must</em> remember to call <code class="docutils literal notranslate"><span class="pre">f.close()</span></code> or we might
corrupt the file when the program quits.</p>
<div class="compound">
<p class="rubric"><em>BasicWriter.py</em>: Write a NeXus HDF5 file using Python with h5py</p>
<div class="highlight-python notranslate" id="example-h5py-basicwriter"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="sd">&#39;&#39;&#39;Writes a NeXus HDF5 file using h5py and numpy&#39;&#39;&#39;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kn">import</span> <span class="nn">h5py</span>    <span class="c1"># HDF5 support</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Write a NeXus HDF5 file&quot;</span><span class="p">)</span>
<span class="linenos"> 8</span><span class="n">fileName</span> <span class="o">=</span> <span class="s2">&quot;prj_test.nexus.hdf5&quot;</span>
<span class="linenos"> 9</span><span class="n">timestamp</span> <span class="o">=</span> <span class="s2">&quot;2010-10-18T17:17:04-0500&quot;</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="c1"># load data from two column format</span>
<span class="linenos">12</span><span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;input.dat&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="linenos">13</span><span class="n">mr_arr</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">14</span><span class="n">i00_arr</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="c1"># create the HDF5 NeXus file</span>
<span class="linenos">17</span><span class="n">f</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="linenos">18</span><span class="c1"># point to the default data to be plotted</span>
<span class="linenos">19</span><span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span>          <span class="o">=</span> <span class="s1">&#39;entry&#39;</span>
<span class="linenos">20</span><span class="c1"># give the HDF5 root some more attributes</span>
<span class="linenos">21</span><span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;file_name&#39;</span><span class="p">]</span>        <span class="o">=</span> <span class="n">fileName</span>
<span class="linenos">22</span><span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;file_time&#39;</span><span class="p">]</span>        <span class="o">=</span> <span class="n">timestamp</span>
<span class="linenos">23</span><span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;instrument&#39;</span><span class="p">]</span>       <span class="o">=</span> <span class="s1">&#39;APS USAXS at 32ID-B&#39;</span>
<span class="linenos">24</span><span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;creator&#39;</span><span class="p">]</span>          <span class="o">=</span> <span class="s1">&#39;BasicWriter.py&#39;</span>
<span class="linenos">25</span><span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;NeXus_version&#39;</span><span class="p">]</span>    <span class="o">=</span> <span class="s1">&#39;4.3.0&#39;</span>
<span class="linenos">26</span><span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;HDF5_Version&#39;</span><span class="p">]</span>     <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">hdf5_version</span>
<span class="linenos">27</span><span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;h5py_version&#39;</span><span class="p">]</span>     <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">version</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="c1"># create the NXentry group</span>
<span class="linenos">30</span><span class="n">nxentry</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="s1">&#39;entry&#39;</span><span class="p">)</span>
<span class="linenos">31</span><span class="n">nxentry</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;NX_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;NXentry&#39;</span>
<span class="linenos">32</span><span class="n">nxentry</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mr_scan&#39;</span>
<span class="linenos">33</span><span class="n">nxentry</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s1">&#39;1-D scan of I00 v. mr&#39;</span><span class="p">)</span>
<span class="linenos">34</span>
<span class="linenos">35</span><span class="c1"># create the NXentry group</span>
<span class="linenos">36</span><span class="n">nxdata</span> <span class="o">=</span> <span class="n">nxentry</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="s1">&#39;mr_scan&#39;</span><span class="p">)</span>
<span class="linenos">37</span><span class="n">nxdata</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;NX_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;NXdata&#39;</span>
<span class="linenos">38</span><span class="n">nxdata</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;signal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;I00&#39;</span>      <span class="c1"># Y axis of default plot</span>
<span class="linenos">39</span><span class="n">nxdata</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;axes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mr&#39;</span>         <span class="c1"># X axis of default plot</span>
<span class="linenos">40</span><span class="n">nxdata</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;mr_indices&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,]</span>   <span class="c1"># use &quot;mr&quot; as the first dimension of I00</span>
<span class="linenos">41</span>
<span class="linenos">42</span><span class="c1"># X axis data</span>
<span class="linenos">43</span><span class="n">ds</span> <span class="o">=</span> <span class="n">nxdata</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;mr&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mr_arr</span><span class="p">)</span>
<span class="linenos">44</span><span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;units&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;degrees&#39;</span>
<span class="linenos">45</span><span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;long_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;USAXS mr (degrees)&#39;</span>    <span class="c1"># suggested X axis plot label</span>
<span class="linenos">46</span>
<span class="linenos">47</span><span class="c1"># Y axis data</span>
<span class="linenos">48</span><span class="n">ds</span> <span class="o">=</span> <span class="n">nxdata</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;I00&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">i00_arr</span><span class="p">)</span>
<span class="linenos">49</span><span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;units&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;counts&#39;</span>
<span class="linenos">50</span><span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;long_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;USAXS I00 (counts)&#39;</span>    <span class="c1"># suggested Y axis plot label</span>
<span class="linenos">51</span>
<span class="linenos">52</span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>   <span class="c1"># be CERTAIN to close the file</span>
<span class="linenos">53</span>
<span class="linenos">54</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;wrote file:&quot;</span><span class="p">,</span> <span class="n">fileName</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="reading-the-hdf5-file-using-h5py">
<span id="example-h5py-reading"></span><h3>Reading the HDF5 file using <strong>h5py</strong><a class="headerlink" href="#reading-the-hdf5-file-using-h5py" title="Permalink to this heading">¶</a></h3>
<p>The file reader, <a class="reference internal" href="#example-h5py-reader"><span class="std std-ref">BasicReader.py</span></a>,
is very simple since the bulk of the work is done by <code class="docutils literal notranslate"><span class="pre">h5py</span></code>.
Our code opens the HDF5 we wrote above,
prints the HDF5 attributes from the file, reads the two datasets,
and then prints them out as columns.  As simple as that.
Of course, real code might add some error-handling and
extracting other useful stuff from the file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See that we identified each of the two datasets using HDF5 absolute path references
(just using the group and dataset names). Also, while coding this example, we were reminded
that HDF5 is sensitive to upper or lowercase. That is, <code class="docutils literal notranslate"><span class="pre">I00</span></code> is not the same is
<code class="docutils literal notranslate"><span class="pre">i00</span></code>.</p>
</div>
<div class="compound">
<p class="rubric"><em>BasicReader.py</em>: Read a NeXus HDF5 file using Python with h5py</p>
<div class="highlight-python notranslate" id="example-h5py-reader"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="sd">&#39;&#39;&#39;Reads NeXus HDF5 files using h5py and prints the contents&#39;&#39;&#39;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kn">import</span> <span class="nn">h5py</span>    <span class="c1"># HDF5 support</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="n">fileName</span> <span class="o">=</span> <span class="s2">&quot;prj_test.nexus.hdf5&quot;</span>
<span class="linenos"> 7</span><span class="n">f</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span>  <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="linenos"> 8</span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<span class="linenos"> 9</span>    <span class="nb">print</span><span class="p">(</span><span class="n">item</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="n">item</span><span class="p">])</span>
<span class="linenos">10</span><span class="n">mr</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;/entry/mr_scan/mr&#39;</span><span class="p">]</span>
<span class="linenos">11</span><span class="n">i00</span> <span class="o">=</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;/entry/mr_scan/I00&#39;</span><span class="p">]</span>
<span class="linenos">12</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="se">\t</span><span class="si">%s</span><span class="se">\t</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="s2">&quot;mr&quot;</span><span class="p">,</span> <span class="s2">&quot;I00&quot;</span><span class="p">))</span>
<span class="linenos">13</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mr</span><span class="p">)):</span>
<span class="linenos">14</span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="se">\t</span><span class="si">%g</span><span class="se">\t</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">mr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">i00</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
<span class="linenos">15</span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Output from <code class="docutils literal notranslate"><span class="pre">BasicReader.py</span></code> is shown next.</p>
<div class="compound">
<p class="rubric">Output from <code class="docutils literal notranslate"><span class="pre">BasicReader.py</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>file_name: prj_test.nexus.hdf5
<span class="linenos"> 2</span>file_time: 2010-10-18T17:17:04-0500
<span class="linenos"> 3</span>creator: BasicWriter.py
<span class="linenos"> 4</span>HDF5_Version: 1.8.5
<span class="linenos"> 5</span>NeXus_version: 4.3.0
<span class="linenos"> 6</span>h5py_version: 1.2.1
<span class="linenos"> 7</span>instrument: APS USAXS at 32ID-B
<span class="linenos"> 8</span>#   mr  I00
<span class="linenos"> 9</span>0   17.9261 1037
<span class="linenos">10</span>1   17.9259 1318
<span class="linenos">11</span>2   17.9258 1704
<span class="linenos">12</span>3   17.9256 2857
<span class="linenos">13</span>4   17.9254 4516
<span class="linenos">14</span>5   17.9252 9998
<span class="linenos">15</span>6   17.9251 23819
<span class="linenos">16</span>7   17.9249 31662
<span class="linenos">17</span>8   17.9247 40458
<span class="linenos">18</span>9   17.9246 49087
<span class="linenos">19</span>10  17.9244 56514
<span class="linenos">20</span>11  17.9243 63499
<span class="linenos">21</span>12  17.9241 66802
<span class="linenos">22</span>13  17.9239 66863
<span class="linenos">23</span>14  17.9237 66599
<span class="linenos">24</span>15  17.9236 66206
<span class="linenos">25</span>16  17.9234 65747
<span class="linenos">26</span>17  17.9232 65250
<span class="linenos">27</span>18  17.9231 64129
<span class="linenos">28</span>19  17.9229 63044
<span class="linenos">29</span>20  17.9228 60796
<span class="linenos">30</span>21  17.9226 56795
<span class="linenos">31</span>22  17.9224 51550
<span class="linenos">32</span>23  17.9222 43710
<span class="linenos">33</span>24  17.9221 29315
<span class="linenos">34</span>25  17.9219 19782
<span class="linenos">35</span>26  17.9217 12992
<span class="linenos">36</span>27  17.9216 6622
<span class="linenos">37</span>28  17.9214 4198
<span class="linenos">38</span>29  17.9213 2248
<span class="linenos">39</span>30  17.9211 1321
</pre></div>
</div>
</div>
<section id="finding-the-default-plottable-data">
<span id="finding-default-data-python"></span><h4>Finding the default plottable data<a class="headerlink" href="#finding-the-default-plottable-data" title="Permalink to this heading">¶</a></h4>
<p>Let’s make a new reader that follows the chain of
attributes (<code class="docutils literal notranslate"><span class="pre">&#64;default</span></code>, <code class="docutils literal notranslate"><span class="pre">&#64;signal</span></code>, and <code class="docutils literal notranslate"><span class="pre">&#64;axes</span></code>)
to find the default plottable data.  We’ll use the
same data file as the previous example.
Our demo here assumes one-dimensional data.
(For higher dimensionality data,
we’ll need more complexity when handling the
<code class="docutils literal notranslate"><span class="pre">&#64;axes</span></code> attribute and we’ll to check the
field sizes. See section <a class="reference internal" href="../../datarules.html#find-plottable-data"><span class="std std-ref">Find the plottable data</span></a>,
subsection <a class="reference internal" href="../../datarules.html#find-plottable-data-v3"><span class="std std-ref">Version 3</span></a>, for the details.)</p>
<div class="compound">
<p class="rubric"><em>reader_attributes_trail.py</em>: Read a NeXus HDF5 file using Python with h5py</p>
<div class="highlight-python notranslate" id="example-h5py-reader-attributes-trail"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>
<span class="linenos"> 2</span><span class="kn">import</span> <span class="nn">h5py</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s2">&quot;prj_test.nexus.hdf5&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">nx</span><span class="p">:</span>
<span class="linenos"> 5</span>    <span class="c1"># find the default NXentry group</span>
<span class="linenos"> 6</span>    <span class="n">nx_entry</span> <span class="o">=</span> <span class="n">nx</span><span class="p">[</span><span class="n">nx</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]]</span>
<span class="linenos"> 7</span>    <span class="c1"># find the default NXdata group</span>
<span class="linenos"> 8</span>    <span class="n">nx_data</span> <span class="o">=</span> <span class="n">nx_entry</span><span class="p">[</span><span class="n">nx_entry</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]]</span>
<span class="linenos"> 9</span>    <span class="c1"># find the signal field</span>
<span class="linenos">10</span>    <span class="n">signal</span> <span class="o">=</span> <span class="n">nx_data</span><span class="p">[</span><span class="n">nx_data</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;signal&quot;</span><span class="p">]]</span>
<span class="linenos">11</span>    <span class="c1"># find the axes field(s)</span>
<span class="linenos">12</span>    <span class="n">attr_axes</span> <span class="o">=</span> <span class="n">nx_data</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;axes&quot;</span><span class="p">]</span>
<span class="linenos">13</span>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attr_axes</span><span class="p">,</span> <span class="p">(</span><span class="nb">set</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
<span class="linenos">14</span>        <span class="c1">#  but check that attr_axes only describes 1-D data</span>
<span class="linenos">15</span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">attr_axes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">16</span>            <span class="n">attr_axes</span> <span class="o">=</span> <span class="n">attr_axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">17</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">18</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;expected 1-D data but @axes=</span><span class="si">{</span><span class="n">attr_axes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">19</span>    <span class="n">axes</span> <span class="o">=</span> <span class="n">nx_data</span><span class="p">[</span><span class="n">attr_axes</span><span class="p">]</span>
<span class="linenos">20</span>
<span class="linenos">21</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file: </span><span class="si">{</span><span class="n">nx</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">22</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;signal: </span><span class="si">{</span><span class="n">signal</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">23</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;axes: </span><span class="si">{</span><span class="n">axes</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">24</span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">axes</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">signal</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">25</span>    <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span> <span class="n">signal</span><span class="p">):</span>
<span class="linenos">26</span>        <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Output from <code class="docutils literal notranslate"><span class="pre">reader_attributes_trail.py</span></code> is shown next.</p>
<div class="compound">
<p class="rubric">Output from <code class="docutils literal notranslate"><span class="pre">reader_attributes_trail.py</span></code></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>file: prj_test.nexus.hdf5
<span class="linenos"> 2</span>signal: /entry/mr_scan/I00
<span class="linenos"> 3</span>axes: /entry/mr_scan/mr
<span class="linenos"> 4</span>/entry/mr_scan/mr /entry/mr_scan/I00
<span class="linenos"> 5</span>17.92608 1037
<span class="linenos"> 6</span>17.92591 1318
<span class="linenos"> 7</span>17.92575 1704
<span class="linenos"> 8</span>17.92558 2857
<span class="linenos"> 9</span>17.92541 4516
<span class="linenos">10</span>17.92525 9998
<span class="linenos">11</span>17.92508 23819
<span class="linenos">12</span>17.92491 31662
<span class="linenos">13</span>17.92475 40458
<span class="linenos">14</span>17.92458 49087
<span class="linenos">15</span>17.92441 56514
<span class="linenos">16</span>17.92425 63499
<span class="linenos">17</span>17.92408 66802
<span class="linenos">18</span>17.92391 66863
<span class="linenos">19</span>17.92375 66599
<span class="linenos">20</span>17.92358 66206
<span class="linenos">21</span>17.92341 65747
<span class="linenos">22</span>17.92325 65250
<span class="linenos">23</span>17.92308 64129
<span class="linenos">24</span>17.92291 63044
<span class="linenos">25</span>17.92275 60796
<span class="linenos">26</span>17.92258 56795
<span class="linenos">27</span>17.92241 51550
<span class="linenos">28</span>17.92225 43710
<span class="linenos">29</span>17.92208 29315
<span class="linenos">30</span>17.92191 19782
<span class="linenos">31</span>17.92175 12992
<span class="linenos">32</span>17.92158 6622
<span class="linenos">33</span>17.92141 4198
<span class="linenos">34</span>17.92125 2248
<span class="linenos">35</span>17.92108 1321
</pre></div>
</div>
</div>
</section>
</section>
<section id="plotting-the-hdf5-file">
<span id="example-h5py-plotting"></span><h3>Plotting the HDF5 file<a class="headerlink" href="#plotting-the-hdf5-file" title="Permalink to this heading">¶</a></h3>
<p id="index-2">Now that we are certain our file conforms to the NeXus
standard, let’s plot it using the <code class="docutils literal notranslate"><span class="pre">NeXpy</span></code> <a class="footnote-reference brackets" href="#id6" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>
client tool.  To help label the plot, we added the
<code class="docutils literal notranslate"><span class="pre">long_name</span></code> attributes to each of our datasets.
We also added metadata to the root level of our HDF5 file
similar to that written by the NAPI.  It seemed to be a useful addition.
Compare this with <a class="reference internal" href="#example-h5py-plot"><span class="std std-ref">plot of our mr_scan</span></a>
and note that the horizontal axis of this plot is mirrored from that above.
This is because the data is stored in the file in descending
<code class="docutils literal notranslate"><span class="pre">mr</span></code> order and <code class="docutils literal notranslate"><span class="pre">NeXpy</span></code> has plotted
it that way (in order of appearance) by default.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id6" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">3</a><span class="fn-bracket">]</span></span>
<p><em>NeXpy</em>:    <a class="reference external" href="http://nexpy.github.io/nexpy/">http://nexpy.github.io/nexpy/</a></p>
</aside>
</aside>
<div class="compound">
<figure class="align-default" id="id11">
<span id="fig-example-h5py-nexpy-plot"></span><a class="reference internal image-reference" href="../../_images/nexpy.png"><img alt="fig-Example-H5py-nexpy-plot" src="../../_images/nexpy.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">plot of our <em>mr_scan</em> using NeXpy</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</div>
</section>
</section>
<section id="links-to-data-in-external-hdf5-files">
<span id="h5py-example-external-links"></span><h2><span class="section-number">2.1.2.3. </span>Links to Data in External HDF5 Files<a class="headerlink" href="#links-to-data-in-external-hdf5-files" title="Permalink to this heading">¶</a></h2>
<p>HDF5 files may contain links to data (or groups) in other files.
This can be used to advantage to refer to data in existing HDF5 files
and create NeXus-compliant data files.  Here, we show such an example,
using the same <code class="docutils literal notranslate"><span class="pre">counts</span></code> v. <code class="docutils literal notranslate"><span class="pre">two_theta</span></code> data from the examples above.</p>
<p>We use the <em>HDF5 external file</em> links with NeXus data files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span><span class="p">[</span><span class="n">local_addr</span><span class="p">]</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">ExternalLink</span><span class="p">(</span><span class="n">external_file_name</span><span class="p">,</span> <span class="n">external_addr</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">f</span></code> is an open <code class="docutils literal notranslate"><span class="pre">h5py.File()</span></code> object in which we will create the new link,
<code class="docutils literal notranslate"><span class="pre">local_addr</span></code> is an HDF5 path address, <code class="docutils literal notranslate"><span class="pre">external_file_name</span></code> is the name
(relative or absolute) of an existing HDF5 file, and <code class="docutils literal notranslate"><span class="pre">external_addr</span></code> is the
HDF5 path address of the existing data in the <code class="docutils literal notranslate"><span class="pre">external_file_name</span></code> to be linked.</p>
<section id="file-external-angles-hdf5">
<h3>file: external_angles.hdf5<a class="headerlink" href="#file-external-angles-hdf5" title="Permalink to this heading">¶</a></h3>
<p>Take for example, the structure of <a class="reference download internal" download="" href="../../_downloads/34241ebc86fb871cf0b459397b928a96/external_angles.hdf5"><code class="xref download docutils literal notranslate"><span class="pre">external_angles.hdf5</span></code></a>,
a simple HDF5 data file that contains just the <code class="docutils literal notranslate"><span class="pre">two_theta</span></code>
angles in an HDF5 dataset at the root level of the file.
Although this is a valid HDF5 data file, it is not a valid NeXus data file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>angles:float64[31] = [17.926079999999999, &#39;...&#39;, 17.92108]
<span class="linenos">2</span>  @units = degrees
</pre></div>
</div>
</section>
<section id="file-external-counts-hdf5">
<h3>file: external_counts.hdf5<a class="headerlink" href="#file-external-counts-hdf5" title="Permalink to this heading">¶</a></h3>
<p>The data in the file <code class="docutils literal notranslate"><span class="pre">external_angles.hdf5</span></code> might be referenced from
another HDF5 file (such as <a class="reference download internal" download="" href="../../_downloads/f9271f3041ff944c3517b80c7a0f25f0/external_counts.hdf5"><code class="xref download docutils literal notranslate"><span class="pre">external_counts.hdf5</span></code></a>)
by an HDF5 external link. <a class="footnote-reference brackets" href="#id8" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>
Here is an example of the structure:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>entry:NXentry
<span class="linenos">2</span>  instrument:NXinstrument
<span class="linenos">3</span>  detector:NXdetector
<span class="linenos">4</span>    counts:NX_INT32[31] = [1037, &#39;...&#39;, 1321]
<span class="linenos">5</span>      @units = counts
<span class="linenos">6</span>    two_theta --&gt; file=&quot;external_angles.hdf5&quot;, path=&quot;/angles&quot;
</pre></div>
</div>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id8" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">4</a><span class="fn-bracket">]</span></span>
<p>see these URLs for further guidance on HDF5 external links:
<a class="reference external" href="https://portal.hdfgroup.org/display/HDF5/H5L_CREATE_EXTERNAL">https://portal.hdfgroup.org/display/HDF5/H5L_CREATE_EXTERNAL</a>,
<a class="reference external" href="http://docs.h5py.org/en/stable/high/group.html#external-links">http://docs.h5py.org/en/stable/high/group.html#external-links</a></p>
</aside>
</aside>
</section>
<section id="file-external-master-hdf5">
<h3>file: external_master.hdf5<a class="headerlink" href="#file-external-master-hdf5" title="Permalink to this heading">¶</a></h3>
<p>A valid NeXus data file could be created that refers to the data in these files
without making a copy of the data files themselves.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is necessary for all
these files to be located together in the same directory for the HDF5 external file
links to work properly.`</p>
</div>
<p>To be a valid NeXus file, it must contain a <a class="reference internal" href="../../classes/base_classes/NXentry.html#nxentry"><span class="std std-ref">NXentry</span></a> group.
For the files above, it is simple to make a master file that links to
the data we desire, from structure that we create.  We then add the
group attributes that describe the default plottable data:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>data:NXdata
  @signal = counts
  @axes = &quot;two_theta&quot;
  @two_theta_indices = 0
</pre></div>
</div>
<p>Here is (the basic structure of) <a class="reference download internal" download="" href="../../_downloads/9eac54546863244ad4ebc383815cace2/external_master.hdf5"><code class="xref download docutils literal notranslate"><span class="pre">external_master.hdf5</span></code></a>, an example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>entry:NXentry
<span class="linenos">2</span>@default = data
<span class="linenos">3</span>  instrument --&gt; file=&quot;external_counts.hdf5&quot;, path=&quot;/entry/instrument&quot;
<span class="linenos">4</span>  data:NXdata
<span class="linenos">5</span>    @signal = counts
<span class="linenos">6</span>    @axes = &quot;two_theta&quot;
<span class="linenos">7</span>     @two_theta = 0
<span class="linenos">8</span>    counts --&gt; file=&quot;external_counts.hdf5&quot;, path=&quot;/entry/instrument/detector/counts&quot;
<span class="linenos">9</span>    two_theta --&gt; file=&quot;external_angles.hdf5&quot;, path=&quot;/angles&quot;
</pre></div>
</div>
</section>
<section id="source-code-externalexample-py">
<h3>source code: externalExample.py<a class="headerlink" href="#source-code-externalexample-py" title="Permalink to this heading">¶</a></h3>
<p>Here is the complete code of a Python program, using <code class="docutils literal notranslate"><span class="pre">h5py</span></code>
to write a NeXus-compliant HDF5 file with links to data in other HDF5 files.</p>
<div class="compound">
<p class="rubric"><em>externalExample.py</em>: Write using HDF5 external links</p>
<div class="highlight-python notranslate" id="example-h5py-externalexample"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python</span>
<span class="linenos"> 2</span><span class="sd">&#39;&#39;&#39;</span>
<span class="linenos"> 3</span><span class="sd">Writes a NeXus HDF5 file using h5py with links to data in other HDF5 files.</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="sd">This example is based on ``writer_2_1``.</span>
<span class="linenos"> 6</span><span class="sd">&#39;&#39;&#39;</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="kn">import</span> <span class="nn">h5py</span>
<span class="linenos"> 9</span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="n">FILE_HDF5_MASTER</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;external_master.hdf5&quot;</span>
<span class="linenos">12</span><span class="n">FILE_HDF5_ANGLES</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;external_angles.hdf5&quot;</span>
<span class="linenos">13</span><span class="n">FILE_HDF5_COUNTS</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;external_counts.hdf5&quot;</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="c1">#---------------------------</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="c1"># get some data</span>
<span class="linenos">18</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;input.dat&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="linenos">19</span><span class="n">tthData</span> <span class="o">=</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>                             <span class="c1"># float[]</span>
<span class="linenos">20</span><span class="n">countsData</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>   <span class="c1"># int[]</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="c1"># put the angle data in an external (non-NeXus) HDF5 data file</span>
<span class="linenos">23</span><span class="n">f</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">FILE_HDF5_ANGLES</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="linenos">24</span><span class="n">ds</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;angles&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">tthData</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="sa">u</span><span class="s2">&quot;units&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;degrees&quot;</span>
<span class="linenos">26</span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>    <span class="c1"># be CERTAIN to close the file</span>
<span class="linenos">27</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="c1"># put the detector counts in an external HDF5 data file </span>
<span class="linenos">30</span><span class="c1"># with *incomplete* NeXus structure (no NXdata group)</span>
<span class="linenos">31</span><span class="n">f</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">FILE_HDF5_COUNTS</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="linenos">32</span><span class="n">nxentry</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;entry&quot;</span><span class="p">)</span>
<span class="linenos">33</span><span class="n">nxentry</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="sa">u</span><span class="s2">&quot;NX_class&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;NXentry&quot;</span>
<span class="linenos">34</span><span class="n">nxinstrument</span> <span class="o">=</span> <span class="n">nxentry</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;instrument&quot;</span><span class="p">)</span>
<span class="linenos">35</span><span class="n">nxinstrument</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="sa">u</span><span class="s2">&quot;NX_class&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;NXinstrument&quot;</span>
<span class="linenos">36</span><span class="n">nxdetector</span> <span class="o">=</span> <span class="n">nxinstrument</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;detector&quot;</span><span class="p">)</span>
<span class="linenos">37</span><span class="n">nxdetector</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="sa">u</span><span class="s2">&quot;NX_class&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;NXdetector&quot;</span>
<span class="linenos">38</span><span class="n">ds</span> <span class="o">=</span> <span class="n">nxdetector</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;counts&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">countsData</span><span class="p">)</span>
<span class="linenos">39</span><span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="sa">u</span><span class="s2">&quot;units&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;counts&quot;</span>
<span class="linenos">40</span><span class="c1"># link the &quot;two_theta&quot; data stored in separate file</span>
<span class="linenos">41</span><span class="n">local_addr</span> <span class="o">=</span> <span class="n">nxdetector</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="sa">u</span><span class="s2">&quot;/two_theta&quot;</span>
<span class="linenos">42</span><span class="n">f</span><span class="p">[</span><span class="n">local_addr</span><span class="p">]</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">ExternalLink</span><span class="p">(</span><span class="n">FILE_HDF5_ANGLES</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;/angles&quot;</span><span class="p">)</span>
<span class="linenos">43</span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="c1"># create a master NeXus HDF5 file</span>
<span class="linenos">46</span><span class="n">f</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">FILE_HDF5_MASTER</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="linenos">47</span><span class="n">f</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="sa">u</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;entry&quot;</span>
<span class="linenos">48</span><span class="n">nxentry</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;entry&quot;</span><span class="p">)</span>
<span class="linenos">49</span><span class="n">nxentry</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="sa">u</span><span class="s2">&quot;NX_class&quot;</span><span class="p">]</span> <span class="o">=</span><span class="sa">u</span><span class="s2">&quot;NXentry&quot;</span>
<span class="linenos">50</span><span class="n">nxentry</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="sa">u</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;data&quot;</span>
<span class="linenos">51</span><span class="n">nxdata</span> <span class="o">=</span> <span class="n">nxentry</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;data&quot;</span><span class="p">)</span>
<span class="linenos">52</span><span class="n">nxdata</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="sa">u</span><span class="s2">&quot;NX_class&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;NXdata&quot;</span>
<span class="linenos">53</span>
<span class="linenos">54</span><span class="c1"># link in the signal data</span>
<span class="linenos">55</span><span class="n">local_addr</span> <span class="o">=</span> <span class="s1">&#39;/entry/data/counts&#39;</span>
<span class="linenos">56</span><span class="n">external_addr</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;/entry/instrument/detector/counts&quot;</span>
<span class="linenos">57</span><span class="n">f</span><span class="p">[</span><span class="n">local_addr</span><span class="p">]</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">ExternalLink</span><span class="p">(</span><span class="n">FILE_HDF5_COUNTS</span><span class="p">,</span> <span class="n">external_addr</span><span class="p">)</span>
<span class="linenos">58</span><span class="n">nxdata</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="sa">u</span><span class="s2">&quot;signal&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;counts&quot;</span>
<span class="linenos">59</span>
<span class="linenos">60</span><span class="c1"># link in the axes data</span>
<span class="linenos">61</span><span class="n">local_addr</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;/entry/data/two_theta&quot;</span>
<span class="linenos">62</span><span class="n">f</span><span class="p">[</span><span class="n">local_addr</span><span class="p">]</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">ExternalLink</span><span class="p">(</span><span class="n">FILE_HDF5_ANGLES</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;/angles&quot;</span><span class="p">)</span>
<span class="linenos">63</span><span class="n">nxdata</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="sa">u</span><span class="s2">&quot;axes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;two_theta&quot;</span>
<span class="linenos">64</span><span class="n">nxdata</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="sa">u</span><span class="s2">&quot;two_theta_indices&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,]</span>
<span class="linenos">65</span>
<span class="linenos">66</span><span class="n">local_addr</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;/entry/instrument&quot;</span>
<span class="linenos">67</span><span class="n">f</span><span class="p">[</span><span class="n">local_addr</span><span class="p">]</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">ExternalLink</span><span class="p">(</span><span class="n">FILE_HDF5_COUNTS</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;/entry/instrument&quot;</span><span class="p">)</span>
<span class="linenos">68</span>
<span class="linenos">69</span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</section>
<section id="downloads">
<h3>downloads<a class="headerlink" href="#downloads" title="Permalink to this heading">¶</a></h3>
<p>The Python code and files related to this section may be downloaded from the following table.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>file</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference download internal" download="" href="../../_downloads/68b7dcbd738b35af3fd6eca3dec6b58f/input.dat"><code class="xref download docutils literal notranslate"><span class="pre">input.dat</span></code></a></p></td>
<td><p>2-column ASCII data used in this section</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference download internal" download="" href="../../_downloads/532ebcaf97c2cc1df6342a4e06b5805f/BasicReader.py"><code class="xref download docutils literal notranslate"><span class="pre">BasicReader.py</span></code></a></p></td>
<td><p>python code to read example <em>prj_test.nexus.hdf5</em></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference download internal" download="" href="../../_downloads/6937132be984b1c69840f9de424ae917/BasicWriter.py"><code class="xref download docutils literal notranslate"><span class="pre">BasicWriter.py</span></code></a></p></td>
<td><p>python code to write example <em>prj_test.nexus.hdf5</em></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference download internal" download="" href="../../_downloads/f818368c68cbe53a28546d2b1e3bc21e/external_angles_h5dump.txt"><code class="xref download docutils literal notranslate"><span class="pre">external_angles_h5dump.txt</span></code></a></p></td>
<td><p><em>h5dump</em> analysis of <em>external_angles.hdf5</em></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference download internal" download="" href="../../_downloads/34241ebc86fb871cf0b459397b928a96/external_angles.hdf5"><code class="xref download docutils literal notranslate"><span class="pre">external_angles.hdf5</span></code></a></p></td>
<td><p>HDF5 file written by <em>externalExample</em></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference download internal" download="" href="../../_downloads/fb8ab3894c11831184337e81e0adef06/external_angles_structure.txt"><code class="xref download docutils literal notranslate"><span class="pre">external_angles_structure.txt</span></code></a></p></td>
<td><p><em>punx tree</em> analysis of <em>external_angles.hdf5</em></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference download internal" download="" href="../../_downloads/cbd0b3a0cf6f5984eccfa991948f965a/external_counts_h5dump.txt"><code class="xref download docutils literal notranslate"><span class="pre">external_counts_h5dump.txt</span></code></a></p></td>
<td><p><em>h5dump</em> analysis of <em>external_counts.hdf5</em></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference download internal" download="" href="../../_downloads/f9271f3041ff944c3517b80c7a0f25f0/external_counts.hdf5"><code class="xref download docutils literal notranslate"><span class="pre">external_counts.hdf5</span></code></a></p></td>
<td><p>HDF5 file written by <em>externalExample</em></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference download internal" download="" href="../../_downloads/ab7b6819943fc7daf9a8271a40ee3478/external_counts_structure.txt"><code class="xref download docutils literal notranslate"><span class="pre">external_counts_structure.txt</span></code></a></p></td>
<td><p><em>punx tree</em> analysis of <em>external_counts.hdf5</em></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference download internal" download="" href="../../_downloads/e148aff3c2435a4a6ddc3f555bf79aa4/externalExample.py"><code class="xref download docutils literal notranslate"><span class="pre">externalExample.py</span></code></a></p></td>
<td><p>python code to write external linking examples</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference download internal" download="" href="../../_downloads/db06dadc8b583f1d98b4cd301ce3fa3b/external_master_h5dump.txt"><code class="xref download docutils literal notranslate"><span class="pre">external_master_h5dump.txt</span></code></a></p></td>
<td><p><em>h5dump</em> analysis of <em>external_master.hdf5</em></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference download internal" download="" href="../../_downloads/9eac54546863244ad4ebc383815cace2/external_master.hdf5"><code class="xref download docutils literal notranslate"><span class="pre">external_master.hdf5</span></code></a></p></td>
<td><p>NeXus file written by <em>externalExample</em></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference download internal" download="" href="../../_downloads/50987068e7fdc905743cae696b1ea312/external_master_structure.txt"><code class="xref download docutils literal notranslate"><span class="pre">external_master_structure.txt</span></code></a></p></td>
<td><p><em>punx tree</em> analysis of <em>external_master.hdf5</em></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference download internal" download="" href="../../_downloads/b64c2a0a6ae1b90ee4e3c11e2c455c09/prj_test.nexus_h5dump.txt"><code class="xref download docutils literal notranslate"><span class="pre">prj_test.nexus_h5dump.txt</span></code></a></p></td>
<td><p><em>h5dump</em> analysis of the NeXus file</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference download internal" download="" href="../../_downloads/944fbb3059825cbc1c35ff21d66ac30f/prj_test.nexus.hdf5"><code class="xref download docutils literal notranslate"><span class="pre">prj_test.nexus.hdf5</span></code></a></p></td>
<td><p>NeXus file written by <em>BasicWriter</em></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference download internal" download="" href="../../_downloads/6274dccdc1965853b891855d194a2519/prj_test.nexus_structure.txt"><code class="xref download docutils literal notranslate"><span class="pre">prj_test.nexus_structure.txt</span></code></a></p></td>
<td><p><em>punx tree</em> analysis of the NeXus file</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">2.1.2. Python Examples using <code class="docutils literal notranslate"><span class="pre">h5py</span></code></a><ul>
<li><a class="reference internal" href="#writing-the-simplest-data-using-h5py">2.1.2.1. Writing the simplest data using <code class="docutils literal notranslate"><span class="pre">h5py</span></code></a></li>
<li><a class="reference internal" href="#complete-h5py-example-writing-and-reading-a-nexus-data-file">2.1.2.2. Complete <code class="docutils literal notranslate"><span class="pre">h5py</span></code> example writing and reading a NeXus data file</a><ul>
<li><a class="reference internal" href="#writing-the-hdf5-file-using-h5py">Writing the HDF5 file using <strong>h5py</strong></a></li>
<li><a class="reference internal" href="#reading-the-hdf5-file-using-h5py">Reading the HDF5 file using <strong>h5py</strong></a><ul>
<li><a class="reference internal" href="#finding-the-default-plottable-data">Finding the default plottable data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plotting-the-hdf5-file">Plotting the HDF5 file</a></li>
</ul>
</li>
<li><a class="reference internal" href="#links-to-data-in-external-hdf5-files">2.1.2.3. Links to Data in External HDF5 Files</a><ul>
<li><a class="reference internal" href="#file-external-angles-hdf5">file: external_angles.hdf5</a></li>
<li><a class="reference internal" href="#file-external-counts-hdf5">file: external_counts.hdf5</a></li>
<li><a class="reference internal" href="#file-external-master-hdf5">file: external_master.hdf5</a></li>
<li><a class="reference internal" href="#source-code-externalexample-py">source code: externalExample.py</a></li>
<li><a class="reference internal" href="#downloads">downloads</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../code_native.html"
                          title="previous chapter"><span class="section-number">2.1.1. </span>Example NeXus C programs using native HDF5 commands</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="writer_1_3.html"
                          title="next chapter"><code class="docutils literal notranslate"><span class="pre">h5py</span></code> example writing the simplest NeXus data file</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/examples/h5py/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
<div id="google_search" style="display: none">
	<hr />
	<h3>Google search</h3>
	<form method="get" action="https://www.google.com/search">
		<table border="0" align="center" cellpadding="0">
			<tr>
				<td>
					<input type="text"   name="q" value="" />
				</td>
			</tr>
			<tr>
				<td align="center" style="font-size:75%">
					<input type="radio"  name="sitesearch" value="" />global
					<input type="radio"  name="sitesearch"
						value="manual.nexusformat.org" 
						checked />NeXus manual
					<input type="submit" value="Go" />
					<br />
				</td>
			</tr>
		</table>
	</form>                                
</div>
<script type="text/javascript">$('#google_search').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="writer_1_3.html" title="h5py example writing the simplest NeXus data file"
             >next</a> |</li>
        <li class="right" >
          <a href="../code_native.html" title="2.1.1. Example NeXus C programs using native HDF5 commands"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">nexus v2020.10 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">2. </span>Examples of writing and reading NeXus data files</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.1.2. </span>Python Examples using <code class="docutils literal notranslate"><span class="pre">h5py</span></code></a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; <a href="../../copyright.html">Copyright</a> 1996-2023, NIAC, https://www.nexusformat.org.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    </div>
  </body>
</html>